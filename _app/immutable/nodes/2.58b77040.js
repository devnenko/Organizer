import{s as $,n as S,e as D,b as j,o as C}from"../chunks/scheduler.774070a8.js";import{S as q,i as B,g as d,m as g,s as Z,h as _,j as w,n as v,f as m,c as H,k as p,a as T,x as h,y as z,o as J,z as A,d as b,b as P,t as M,A as U,r as W,u as F,v as G,w as K,p as Q}from"../chunks/index.16e0dac4.js";import{e as I}from"../chunks/each.e59479a4.js";import{b as R}from"../chunks/paths.282b7f9f.js";import{t as k,g as x,T as y,a as L}from"../chunks/stores.fa39917c.js";function N(u){let t,n,s=u[0].time+"",i,f;return{c(){t=d("div"),n=g("+"),i=g(s),f=g(" Min"),this.h()},l(a){t=_(a,"DIV",{class:!0});var e=w(t);n=v(e,"+"),i=v(e,s),f=v(e," Min"),e.forEach(m),this.h()},h(){p(t,"class","absolute right-0 top-0 p-2 outline outline-1 text-base outline-neutral-400 rounded-lg")},m(a,e){T(a,t,e),h(t,n),h(t,i),h(t,f)},p(a,e){e&1&&s!==(s=a[0].time+"")&&J(i,s)},d(a){a&&m(t)}}}function X(u){let t,n,s=u[0].name+"",i,f,a,e,o=u[0].time!=0&&N(u);return{c(){t=d("button"),n=d("div"),i=g(s),f=Z(),o&&o.c(),this.h()},l(l){t=_(l,"BUTTON",{class:!0});var r=w(t);n=_(r,"DIV",{class:!0});var c=w(n);i=v(c,s),c.forEach(m),f=H(r),o&&o.l(r),r.forEach(m),this.h()},h(){p(n,"class","font-semibold"),p(t,"class","text-2xl text-neutral-300 p-6 rounded-lg outline outline-1 outline-neutral-400 shadow-lg relative")},m(l,r){T(l,t,r),h(t,n),h(n,i),h(t,f),o&&o.m(t,null),u[3](t),a||(e=z(t,"click",u[2]),a=!0)},p(l,[r]){r&1&&s!==(s=l[0].name+"")&&J(i,s),l[0].time!=0?o?o.p(l,r):(o=N(l),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},i:S,o:S,d(l){l&&m(t),o&&o.d(),u[3](null),a=!1,e()}}}function Y(u,t,n){let s;D(u,k,o=>n(4,s=o));let{goal:i}=t,f;function a(){i.time!=0,s.splice(s.indexOf(i),1),k.set(s)}function e(o){j[o?"unshift":"push"](()=>{f=o,n(1,f)})}return u.$$set=o=>{"goal"in o&&n(0,i=o.goal)},[i,f,a,e]}class tt extends q{constructor(t){super(),B(this,t,Y,X,$,{goal:0})}}new TextEncoder;function O(u,t,n){const s=u.slice();return s[3]=t[n],s}function V(u){let t,n;return t=new tt({props:{goal:u[3]}}),{c(){W(t.$$.fragment)},l(s){F(t.$$.fragment,s)},m(s,i){G(t,s,i),n=!0},p(s,i){const f={};i&1&&(f.goal=s[3]),t.$set(f)},i(s){n||(b(t.$$.fragment,s),n=!0)},o(s){M(t.$$.fragment,s),n=!1},d(s){K(t,s)}}}function et(u){let t,n,s=`<div class="text-5xl font-bold">Tasks</div> <a class="h-12 aspect-square" href="${R}/edit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="white" d="M5 19h1.4l8.625-8.625l-1.4-1.4L5 17.6V19ZM19.3 8.925l-4.25-4.2l1.4-1.4q.575-.575 1.413-.575t1.412.575l1.4 1.4q.575.575.6 1.388t-.55 1.387L19.3 8.925ZM17.85 10.4L7.25 21H3v-4.25l10.6-10.6l4.25 4.25Zm-3.525-.725l-.7-.7l1.4 1.4l-.7-.7Z"></path></svg></a>`,i,f,a=I(u[0]),e=[];for(let l=0;l<a.length;l+=1)e[l]=V(O(u,a,l));const o=l=>M(e[l],1,1,()=>{e[l]=null});return{c(){t=d("div"),n=d("div"),n.innerHTML=s,i=Z();for(let l=0;l<e.length;l+=1)e[l].c();this.h()},l(l){t=_(l,"DIV",{class:!0});var r=w(t);n=_(r,"DIV",{class:!0,"data-svelte-h":!0}),A(n)!=="svelte-rw4g46"&&(n.innerHTML=s),i=H(r);for(let c=0;c<e.length;c+=1)e[c].l(r);r.forEach(m),this.h()},h(){p(n,"class","flex flex-row justify-between py-2"),p(t,"class","flex flex-col m-7 gap-4")},m(l,r){T(l,t,r),h(t,n),h(t,i);for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(t,null);f=!0},p(l,[r]){if(r&1){a=I(l[0]);let c;for(c=0;c<a.length;c+=1){const E=O(l,a,c);e[c]?(e[c].p(E,r),b(e[c],1)):(e[c]=V(E),e[c].c(),b(e[c],1),e[c].m(t,null))}for(Q(),c=a.length;c<e.length;c+=1)o(c);P()}},i(l){if(!f){for(let r=0;r<a.length;r+=1)b(e[r]);f=!0}},o(l){e=e.filter(Boolean);for(let r=0;r<e.length;r+=1)M(e[r]);f=!1},d(l){l&&m(t),U(e,l)}}}function st(u,t,n){let s,i;D(u,L,a=>n(1,s=a)),D(u,k,a=>n(0,i=a)),C(()=>{JSON.parse(localStorage.getItem("lastDay")||JSON.stringify(x())),localStorage.setItem("lastDay",JSON.stringify(x())),f()});function f(){s.forEach(a=>{let e=0;switch(a.per){case y.Day:e=1;break;case y.Week:e=7;break;case y.Month:e=28;break}let o=e/a.amount;for(console.log(a.name+" Last:"+a.lastDown+" Next:"+o);a.lastDown+o<=x();)a.lastDown+=o,i.push(a),k.set(i);L.set(s)})}return[i]}class rt extends q{constructor(t){super(),B(this,t,st,et,$,{})}}export{rt as component};
